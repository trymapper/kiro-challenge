---
inclusion: always
---

# ドキュメントとベストプラクティスの自動チェック

## 重要な原則

新しいライブラリやフレームワークを使用する際、またはコードを実装する際は、常に最新のドキュメントとベストプラクティスを確認してください。

## 自動チェックが必要な場合

以下の状況では、MCPサーバー（web-search、Context7、AWS Knowledge）を使用して最新情報を確認してください：

### 1. 新しいライブラリやパッケージの使用

- **FastAPI**: 最新のAPI設計パターン、バリデーション方法
- **Pydantic**: 最新のバージョンでの変更点（例: `regex` → `pattern`）
- **boto3**: AWS SDKの最新の使用方法
- **CDK**: 最新のコンストラクトと推奨パターン

### 2. バージョン互換性の確認

新しいプロジェクトを開始する際は、以下を確認：
- 各ライブラリの最新安定版
- 互換性のあるバージョンの組み合わせ
- 既知の問題や非推奨機能

### 3. AWS サービスの使用

- DynamoDB、Lambda、API Gatewayなどの最新のベストプラクティス
- CDKでのリソース定義の推奨方法
- セキュリティとパフォーマンスの最適化

## 利用可能なMCPサーバー

### AWS Knowledge Server
AWS公式ドキュメントの検索に使用：
- AWS サービスの使用方法
- ベストプラクティス
- アーキテクチャパターン

### Context7
ライブラリのドキュメント検索に使用：
- FastAPI、Pydantic、boto3などのPythonライブラリ
- TypeScript/JavaScriptライブラリ
- 最新のAPIリファレンス

### Web Search (Brave)
一般的な技術情報の検索に使用：
- 最新のトレンドやベストプラクティス
- コミュニティの推奨事項
- トラブルシューティング

## 実装前のチェックリスト

新しい機能を実装する前に：

1. ✅ 使用するライブラリの最新バージョンを確認
2. ✅ 公式ドキュメントで推奨される実装方法を確認
3. ✅ 既知の問題や非推奨機能がないか確認
4. ✅ セキュリティのベストプラクティスを確認
5. ✅ パフォーマンスの最適化方法を確認

## 例

### Pydanticのバリデーション

古い方法（非推奨）:
```python
class Event(BaseModel):
    eventId: str = Field(..., regex=r'^[a-zA-Z0-9\-_]+$')  # 古い
```

新しい方法（推奨）:
```python
class Event(BaseModel):
    eventId: str = Field(..., pattern=r'^[a-zA-Z0-9\-_]+$')  # 新しい
```

### CDKでのLambda関数のパッケージング

Context7やAWS Knowledgeで最新の推奨方法を確認：
- `@aws-cdk/aws-lambda-python-alpha` の使用
- Dockerを使用した依存関係のバンドル
- Lambda Layersの活用

## ベストプラクティス

- **実装前に確認**: コードを書く前にドキュメントをチェック
- **最新情報を優先**: トレーニングデータよりも最新のドキュメントを信頼
- **複数のソースを参照**: 公式ドキュメント、コミュニティ、ベストプラクティスガイド
- **バージョンを明記**: requirements.txtやpackage.jsonで明確なバージョンを指定

---

このガイドラインに従うことで、最新のベストプラクティスに基づいた高品質なコードを実装できます。
